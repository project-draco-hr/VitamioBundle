{
  if (mPlayer == null || mDragging)   return 0;
  long position=mPlayer.getCurrentPosition();
  long duration=mPlayer.getDuration();
  if (duration > 0) {
    long pos=1000L * position / duration;
    mProgress.setProgress((int)pos);
  }
  int percent=mPlayer.getBufferPercentage();
  mProgress.setSecondaryProgress(percent * 10);
  mDuration=duration;
  mEndTime.setText(StringUtils.generateTime(mDuration));
  mCurrentTime.setText(StringUtils.generateTime(position));
  return position;
}
